$NetBSD: patch-CMakeLists.txt,v 1.2 2018/09/18 08:41:34 fhajny Exp $

Make sure Kerberos/GSS support can be turned off.

--- CMakeLists.txt.orig	2018-07-31 07:44:20.000000000 +0000
+++ CMakeLists.txt
@@ -24,7 +24,7 @@ get_directory_property(IS_SUBPROJECT PAR
 # do not inherit include directories from the parent project
 SET_PROPERTY(DIRECTORY PROPERTY INCLUDE_DIRECTORIES)
 FOREACH(V WITH_MYSQLCOMPAT WITH_MSI WITH_SIGNCODE WITH_RTC WITH_UNIT_TESTS
-    WITH_DYNCOL WITH_EXTERNAL_ZLIB WITH_CURL WITH_SQLITE WITH_SSL
+    WITH_DYNCOL WITH_EXTERNAL_ZLIB WITH_CURL WITH_GSS WITH_SQLITE WITH_SSL
     INSTALL_LAYOUT WITH_TEST_SRCPKG)
   SET(${V} ${${OPT}${V}})
 ENDFOREACH()
@@ -62,6 +62,7 @@ ADD_OPTION(WITH_UNIT_TESTS "build test s
 ADD_OPTION(WITH_DYNCOL "Enables support of dynamic coluumns" ON)
 ADD_OPTION(WITH_EXTERNAL_ZLIB "Enables use of external zlib" OFF)
 ADD_OPTION(WITH_CURL "Enables use of curl" ON)
+ADD_OPTION(WITH_GSS "Enables use of Kerberos auth" ON)
 ADD_OPTION(WITH_SSL "Enables use of TLS/SSL library" ON)
 ###############
 
@@ -82,7 +83,7 @@ IF(WITH_RTC)
   SET(RTC_OPTIONS "/RTC1 /RTCc")
 ENDIF()
 
-IF(NOT WIN32)
+IF(WITH_GSS)
   INCLUDE(${CC_SOURCE_DIR}/cmake/FindGSSAPI.cmake)
   IF(GSSAPI_FOUND)
     INCLUDE_DIRECTORIES(${GSSAPI_INCS})
@@ -361,7 +362,7 @@ IF(NOT REMOTEIO_PLUGIN_TYPE MATCHES "OFF
     ADD_DEFINITIONS("-DHAVE_REMOTEIO=1")
   ENDIF()
 ENDIF()
-IF(NOT WIN32)
+IF(WITH_GSS)
   IF(NOT AUTH_GSSAPI_PLUGIN_TYPE MATCHES "OFF")
     INCLUDE(${CC_SOURCE_DIR}/cmake/FindGSSAPI.cmake)
     IF(GSSAPI_FOUND)
